<!-- product_form.ejs -->

<h1><%= title %></h1>

<form action="" method="POST" class="mb-5">
  <div class="form-group">
    <label for="name">Name:</label>
    <input type="text" name="name" required class="form-control" value="<%= (product && product.name) ? product.name : "" %>">
  </div>
  <div class="form-group">
    <label for="description">Description:</label>
    <textarea name="description" rows="3" class="form-control"><%= (product && product.description) ? product.description : '' %></textarea>
  </div>
  <div class="form-group">
    <label for="category">Category:</label>
    <select name="category" required class="form-control">
      <% categories.forEach(function(category) { %>
        <option value="<%= category._id %>" <%= (product && product.category && product.category.includes(category._id.toString())) ? 'selected' : '' %>><%= category.name %></option>
      <% }); %>
    </select>
  </div>
  
  <div class="form-group">
    <label for="price">Price:</label>
    <input type="number" name="price" min="0" step="0.01" class="form-control"  value="<%= (product && product.price) ? product.price : "" %>">
  </div>
  <div class="form-group">
    <label for="number_of_items">Number of Items:</label>
    <input type="number" name="number_of_items" min="0" class="form-control"  value="<%= (product && product.number_of_items) ? product.number_of_items : "" %>">
  </div>
  <button type="submit" class="btn btn-primary">Create</button>
</form>

<h2>Existing Products:</h2>
<ul class="list-group mb-5">
  <% products.forEach(function(product) { %>
    <li class="list-group-item"><a href="<%= product.url %>"><%= product.name %></a></li>
  <% }); %>
</ul>
